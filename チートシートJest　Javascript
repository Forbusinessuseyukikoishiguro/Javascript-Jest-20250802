# Jest JavaScript ãƒ†ã‚¹ãƒˆ æ–°äººã‚¨ãƒ³ã‚¸ãƒ‹ã‚¢å‘ã‘ãƒãƒ¼ãƒˆã‚·ãƒ¼ãƒˆ

## ğŸ“– ç›®æ¬¡
1. [Jestã¨ã¯ï¼Ÿ](#jestã¨ã¯)
2. [ã‚»ãƒƒãƒˆã‚¢ãƒƒãƒ—](#ã‚»ãƒƒãƒˆã‚¢ãƒƒãƒ—)
3. [åŸºæœ¬çš„ãªãƒ†ã‚¹ãƒˆã®æ›¸ãæ–¹](#åŸºæœ¬çš„ãªãƒ†ã‚¹ãƒˆã®æ›¸ãæ–¹)
4. [ã‚ˆãä½¿ã†ãƒãƒƒãƒãƒ£ãƒ¼](#ã‚ˆãä½¿ã†ãƒãƒƒãƒãƒ£ãƒ¼)
5. [ãƒ†ã‚¹ãƒˆã®æ§‹é€ åŒ–](#ãƒ†ã‚¹ãƒˆã®æ§‹é€ åŒ–)
6. [éåŒæœŸãƒ†ã‚¹ãƒˆ](#éåŒæœŸãƒ†ã‚¹ãƒˆ)
7. [ãƒ¢ãƒƒã‚¯ã¨ã‚¹ãƒ‘ã‚¤](#ãƒ¢ãƒƒã‚¯ã¨ã‚¹ãƒ‘ã‚¤)
8. [ã‚»ãƒƒãƒˆã‚¢ãƒƒãƒ—ã¨ã‚¯ãƒªãƒ¼ãƒ³ã‚¢ãƒƒãƒ—](#ã‚»ãƒƒãƒˆã‚¢ãƒƒãƒ—ã¨ã‚¯ãƒªãƒ¼ãƒ³ã‚¢ãƒƒãƒ—)
9. [ã‚¹ãƒŠãƒƒãƒ—ã‚·ãƒ§ãƒƒãƒˆãƒ†ã‚¹ãƒˆ](#ã‚¹ãƒŠãƒƒãƒ—ã‚·ãƒ§ãƒƒãƒˆãƒ†ã‚¹ãƒˆ)
10. [å®Ÿè·µçš„ãªãƒ†ã‚¹ãƒˆä¾‹](#å®Ÿè·µçš„ãªãƒ†ã‚¹ãƒˆä¾‹)
11. [ã‚ˆãã‚ã‚‹ã‚¨ãƒ©ãƒ¼ã¨è§£æ±ºæ–¹æ³•](#ã‚ˆãã‚ã‚‹ã‚¨ãƒ©ãƒ¼ã¨è§£æ±ºæ–¹æ³•)
12. [ãƒ™ã‚¹ãƒˆãƒ—ãƒ©ã‚¯ãƒ†ã‚£ã‚¹](#ãƒ™ã‚¹ãƒˆãƒ—ãƒ©ã‚¯ãƒ†ã‚£ã‚¹)

---

## Jestã¨ã¯ï¼Ÿ

**Jest**ã¯ã€FacebookãŒé–‹ç™ºã—ãŸJavaScriptç”¨ã®ãƒ†ã‚¹ãƒˆãƒ•ãƒ¬ãƒ¼ãƒ ãƒ¯ãƒ¼ã‚¯ã§ã™ã€‚

### ç‰¹å¾´
- âœ… **è¨­å®šä¸è¦**ï¼šã™ãã«ä½¿ã„å§‹ã‚ã‚‰ã‚Œã‚‹
- âœ… **é«˜é€Ÿ**ï¼šä¸¦åˆ—å®Ÿè¡Œã§ãƒ†ã‚¹ãƒˆãŒé€Ÿã„
- âœ… **è±Šå¯Œãªæ©Ÿèƒ½**ï¼šã‚¢ã‚µãƒ¼ã‚·ãƒ§ãƒ³ã€ãƒ¢ãƒƒã‚¯ã€ã‚«ãƒãƒ¬ãƒƒã‚¸ãªã©å…¨éƒ¨å…¥ã‚Š
- âœ… **ã‚¹ãƒŠãƒƒãƒ—ã‚·ãƒ§ãƒƒãƒˆãƒ†ã‚¹ãƒˆ**ï¼šUIã®å¤‰æ›´ã‚’ç°¡å˜ã«æ¤œå‡º

---

## ã‚»ãƒƒãƒˆã‚¢ãƒƒãƒ—

### ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«

```bash
# npmã®å ´åˆ
npm install --save-dev jest

# yarnã®å ´åˆ  
yarn add --dev jest
```

### package.jsonã®è¨­å®š

```json
{
  "scripts": {
    "test": "jest",
    "test:watch": "jest --watch",
    "test:coverage": "jest --coverage"
  }
}
```

### åŸºæœ¬è¨­å®šãƒ•ã‚¡ã‚¤ãƒ«ï¼ˆjest.config.jsï¼‰

```javascript
module.exports = {
  // ãƒ†ã‚¹ãƒˆãƒ•ã‚¡ã‚¤ãƒ«ã®ãƒ‘ã‚¿ãƒ¼ãƒ³
  testMatch: [
    "**/__tests__/**/*.js",
    "**/?(*.)+(spec|test).js"
  ],
  
  // ã‚«ãƒãƒ¬ãƒƒã‚¸ã‚’å–å¾—ã™ã‚‹å¯¾è±¡
  collectCoverageFrom: [
    "src/**/*.js",
    "!src/index.js"
  ],
  
  // ãƒ†ã‚¹ãƒˆç’°å¢ƒï¼ˆãƒ‡ãƒ•ã‚©ãƒ«ãƒˆã¯nodeï¼‰
  testEnvironment: "node" // ã¾ãŸã¯ "jsdom"
};
```

---

## åŸºæœ¬çš„ãªãƒ†ã‚¹ãƒˆã®æ›¸ãæ–¹

### æœ€ã‚‚ã‚·ãƒ³ãƒ—ãƒ«ãªãƒ†ã‚¹ãƒˆ

```javascript
// math.js
function add(a, b) {
  return a + b;
}

function multiply(a, b) {
  return a * b;
}

module.exports = { add, multiply };
```

```javascript
// math.test.js
const { add, multiply } = require('./math');

test('1 + 2 ã¯ 3 ã§ã‚ã‚‹', () => {
  expect(add(1, 2)).toBe(3);
});

test('3 Ã— 4 ã¯ 12 ã§ã‚ã‚‹', () => {
  expect(multiply(3, 4)).toBe(12);
});
```

### ãƒ†ã‚¹ãƒˆã®åŸºæœ¬æ§‹é€ 

```javascript
test('ãƒ†ã‚¹ãƒˆã®èª¬æ˜', () => {
  // æº–å‚™ï¼ˆArrangeï¼‰
  const input = 5;
  const expected = 25;
  
  // å®Ÿè¡Œï¼ˆActï¼‰
  const result = square(input);
  
  // æ¤œè¨¼ï¼ˆAssertï¼‰
  expect(result).toBe(expected);
});
```

---

## ã‚ˆãä½¿ã†ãƒãƒƒãƒãƒ£ãƒ¼

### ç­‰ä¾¡æ€§ã®ãƒ†ã‚¹ãƒˆ

```javascript
test('ç­‰ä¾¡æ€§ã®ãƒ†ã‚¹ãƒˆ', () => {
  // å®Œå…¨ä¸€è‡´ï¼ˆãƒ—ãƒªãƒŸãƒ†ã‚£ãƒ–å‹ç”¨ï¼‰
  expect(2 + 2).toBe(4);
  expect('hello').toBe('hello');
  expect(true).toBe(true);
  
  // ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã®å†…å®¹æ¯”è¼ƒ
  expect({ name: 'John', age: 30 }).toEqual({ name: 'John', age: 30 });
  
  // é…åˆ—ã®æ¯”è¼ƒ
  expect([1, 2, 3]).toEqual([1, 2, 3]);
});
```

### çœŸå½å€¤ã®ãƒ†ã‚¹ãƒˆ

```javascript
test('çœŸå½å€¤ã®ãƒ†ã‚¹ãƒˆ', () => {
  expect(true).toBeTruthy();
  expect(false).toBeFalsy();
  expect(null).toBeFalsy();
  expect(undefined).toBeFalsy();
  expect(0).toBeFalsy();
  expect('').toBeFalsy();
  
  expect('hello').toBeTruthy();
  expect(1).toBeTruthy();
  expect([]).toBeTruthy(); // ç©ºé…åˆ—ã‚‚truthyãªã®ã§æ³¨æ„ï¼
});
```

### æ•°å€¤ã®ãƒ†ã‚¹ãƒˆ

```javascript
test('æ•°å€¤ã®ãƒ†ã‚¹ãƒˆ', () => {
  expect(2 + 2).toBeGreaterThan(3);
  expect(2 + 2).toBeGreaterThanOrEqual(4);
  expect(2 + 2).toBeLessThan(5);
  expect(2 + 2).toBeLessThanOrEqual(4);
  
  // æµ®å‹•å°æ•°ç‚¹æ•°ã®æ¯”è¼ƒ
  expect(0.1 + 0.2).toBeCloseTo(0.3);
});
```

### æ–‡å­—åˆ—ã®ãƒ†ã‚¹ãƒˆ

```javascript
test('æ–‡å­—åˆ—ã®ãƒ†ã‚¹ãƒˆ', () => {
  expect('hello world').toMatch('world');
  expect('hello world').toMatch(/world/);
  expect('hello world').not.toMatch('goodbye');
  
  expect('hello@example.com').toMatch(/\w+@\w+\.\w+/);
});
```

### é…åˆ—ãƒ»ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã®ãƒ†ã‚¹ãƒˆ

```javascript
test('é…åˆ—ã®ãƒ†ã‚¹ãƒˆ', () => {
  const fruits = ['apple', 'banana', 'orange'];
  
  expect(fruits).toContain('banana');
  expect(fruits).toHaveLength(3);
  expect(fruits[0]).toBe('apple');
});

test('ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã®ãƒ†ã‚¹ãƒˆ', () => {
  const user = { name: 'John', age: 30, email: 'john@example.com' };
  
  expect(user).toHaveProperty('name');
  expect(user).toHaveProperty('age', 30);
  expect(user.name).toBe('John');
});
```

### ä¾‹å¤–ã®ãƒ†ã‚¹ãƒˆ

```javascript
function throwError() {
  throw new Error('ä½•ã‹ãŒãŠã‹ã—ã„ï¼');
}

test('ä¾‹å¤–ã®ãƒ†ã‚¹ãƒˆ', () => {
  expect(() => {
    throwError();
  }).toThrow();
  
  expect(() => {
    throwError();
  }).toThrow('ä½•ã‹ãŒãŠã‹ã—ã„ï¼');
  
  expect(() => {
    throwError();
  }).toThrow(/ãŠã‹ã—ã„/);
});
```

---

## ãƒ†ã‚¹ãƒˆã®æ§‹é€ åŒ–

### describe ã‚’ä½¿ã£ãŸã‚°ãƒ«ãƒ¼ãƒ—åŒ–

```javascript
describe('Calculator', () => {
  describe('addé–¢æ•°', () => {
    test('æ­£ã®æ•°ã®è¶³ã—ç®—', () => {
      expect(add(2, 3)).toBe(5);
    });
    
    test('è² ã®æ•°ã®è¶³ã—ç®—', () => {
      expect(add(-2, -3)).toBe(-5);
    });
    
    test('0ã¨ã®è¶³ã—ç®—', () => {
      expect(add(5, 0)).toBe(5);
    });
  });
  
  describe('subtracté–¢æ•°', () => {
    test('æ­£ã®æ•°ã®å¼•ãç®—', () => {
      expect(subtract(5, 3)).toBe(2);
    });
  });
});
```

### test.each ã§ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿åŒ–ãƒ†ã‚¹ãƒˆ

```javascript
test.each([
  [1, 2, 3],
  [2, 3, 5],
  [3, 4, 7],
])('add(%i, %i) = %i', (a, b, expected) => {
  expect(add(a, b)).toBe(expected);
});

// ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆå½¢å¼
test.each([
  { a: 1, b: 2, expected: 3 },
  { a: 2, b: 3, expected: 5 },
  { a: 3, b: 4, expected: 7 },
])('add($a, $b) = $expected', ({ a, b, expected }) => {
  expect(add(a, b)).toBe(expected);
});
```

---

## éåŒæœŸãƒ†ã‚¹ãƒˆ

### Promiseã®ãƒ†ã‚¹ãƒˆ

```javascript
// async/await ã‚’ä½¿ã†æ–¹æ³•ï¼ˆæ¨å¥¨ï¼‰
test('éåŒæœŸé–¢æ•°ã®ãƒ†ã‚¹ãƒˆ', async () => {
  const data = await fetchData();
  expect(data).toBe('ãƒ‡ãƒ¼ã‚¿');
});

// .resolves ã‚’ä½¿ã†æ–¹æ³•
test('PromiseãŒè§£æ±ºã•ã‚Œã‚‹', () => {
  return expect(fetchData()).resolves.toBe('ãƒ‡ãƒ¼ã‚¿');
});

// .rejects ã‚’ä½¿ã†æ–¹æ³•
test('PromiseãŒæ‹’å¦ã•ã‚Œã‚‹', () => {
  return expect(fetchDataWithError()).rejects.toThrow('ã‚¨ãƒ©ãƒ¼');
});
```

### ã‚³ãƒ¼ãƒ«ãƒãƒƒã‚¯é–¢æ•°ã®ãƒ†ã‚¹ãƒˆ

```javascript
function fetchDataCallback(callback) {
  setTimeout(() => {
    callback(null, 'ãƒ‡ãƒ¼ã‚¿');
  }, 100);
}

test('ã‚³ãƒ¼ãƒ«ãƒãƒƒã‚¯é–¢æ•°ã®ãƒ†ã‚¹ãƒˆ', (done) => {
  fetchDataCallback((error, data) => {
    try {
      expect(data).toBe('ãƒ‡ãƒ¼ã‚¿');
      done();
    } catch (error) {
      done(error);
    }
  });
});
```

---

## ãƒ¢ãƒƒã‚¯ã¨ã‚¹ãƒ‘ã‚¤

### é–¢æ•°ã®ãƒ¢ãƒƒã‚¯

```javascript
test('ãƒ¢ãƒƒã‚¯é–¢æ•°ã®åŸºæœ¬', () => {
  const mockFn = jest.fn();
  
  // æˆ»ã‚Šå€¤ã‚’è¨­å®š
  mockFn.mockReturnValue(42);
  
  // é–¢æ•°ã‚’å®Ÿè¡Œ
  const result = mockFn();
  
  // æ¤œè¨¼
  expect(result).toBe(42);
  expect(mockFn).toHaveBeenCalled();
  expect(mockFn).toHaveBeenCalledTimes(1);
});

test('å¼•æ•°ã‚’ãƒã‚§ãƒƒã‚¯', () => {
  const mockFn = jest.fn();
  
  mockFn('hello', 'world');
  
  expect(mockFn).toHaveBeenCalledWith('hello', 'world');
  expect(mockFn).toHaveBeenLastCalledWith('hello', 'world');
});
```

### ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«ã®ãƒ¢ãƒƒã‚¯

```javascript
// userService.js
const axios = require('axios');

async function getUser(id) {
  const response = await axios.get(`/users/${id}`);
  return response.data;
}

module.exports = { getUser };
```

```javascript
// userService.test.js
const axios = require('axios');
const { getUser } = require('./userService');

// axiosã‚’ãƒ¢ãƒƒã‚¯åŒ–
jest.mock('axios');
const mockedAxios = axios;

test('ãƒ¦ãƒ¼ã‚¶ãƒ¼æƒ…å ±ã‚’å–å¾—', async () => {
  const userData = { id: 1, name: 'John' };
  mockedAxios.get.mockResolvedValue({ data: userData });
  
  const user = await getUser(1);
  
  expect(user).toEqual(userData);
  expect(mockedAxios.get).toHaveBeenCalledWith('/users/1');
});
```

### ã‚¹ãƒ‘ã‚¤

```javascript
const utils = require('./utils');

test('é–¢æ•°ãŒå‘¼ã°ã‚ŒãŸã‹ã‚¹ãƒ‘ã‚¤', () => {
  const spy = jest.spyOn(utils, 'formatDate');
  spy.mockReturnValue('2024-01-01');
  
  const result = utils.formatDate(new Date());
  
  expect(result).toBe('2024-01-01');
  expect(spy).toHaveBeenCalled();
  
  // ã‚¹ãƒ‘ã‚¤ã‚’ãƒªã‚¹ãƒˆã‚¢
  spy.mockRestore();
});
```

---

## ã‚»ãƒƒãƒˆã‚¢ãƒƒãƒ—ã¨ã‚¯ãƒªãƒ¼ãƒ³ã‚¢ãƒƒãƒ—

### ãƒ•ãƒƒã‚¯é–¢æ•°

```javascript
describe('ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ãƒ†ã‚¹ãƒˆ', () => {
  let db;
  
  // å…¨ãƒ†ã‚¹ãƒˆé–‹å§‹å‰ã«1å›å®Ÿè¡Œ
  beforeAll(async () => {
    db = await connectToDatabase();
  });
  
  // å„ãƒ†ã‚¹ãƒˆé–‹å§‹å‰ã«å®Ÿè¡Œ
  beforeEach(async () => {
    await db.clear();
    await db.seed();
  });
  
  // å„ãƒ†ã‚¹ãƒˆçµ‚äº†å¾Œã«å®Ÿè¡Œ
  afterEach(async () => {
    await db.cleanup();
  });
  
  // å…¨ãƒ†ã‚¹ãƒˆçµ‚äº†å¾Œã«1å›å®Ÿè¡Œ
  afterAll(async () => {
    await db.disconnect();
  });
  
  test('ãƒ¦ãƒ¼ã‚¶ãƒ¼ã‚’ä½œæˆ', async () => {
    const user = await db.createUser({ name: 'John' });
    expect(user.name).toBe('John');
  });
});
```

---

## ã‚¹ãƒŠãƒƒãƒ—ã‚·ãƒ§ãƒƒãƒˆãƒ†ã‚¹ãƒˆ

```javascript
// component.js
function renderUser(user) {
  return `
    <div class="user">
      <h2>${user.name}</h2>
      <p>Email: ${user.email}</p>
      <p>Age: ${user.age}</p>
    </div>
  `;
}

// component.test.js
test('ãƒ¦ãƒ¼ã‚¶ãƒ¼ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã®ã‚¹ãƒŠãƒƒãƒ—ã‚·ãƒ§ãƒƒãƒˆ', () => {
  const user = {
    name: 'John Doe',
    email: 'john@example.com',
    age: 30
  };
  
  const rendered = renderUser(user);
  expect(rendered).toMatchSnapshot();
});
```

---

## å®Ÿè·µçš„ãªãƒ†ã‚¹ãƒˆä¾‹

### ãƒ¦ãƒ¼ã‚¶ãƒ¼ç®¡ç†ã‚¯ãƒ©ã‚¹ã®ãƒ†ã‚¹ãƒˆ

```javascript
// UserManager.js
class UserManager {
  constructor() {
    this.users = [];
  }
  
  addUser(user) {
    if (!user.name || !user.email) {
      throw new Error('åå‰ã¨ãƒ¡ãƒ¼ãƒ«ã¯å¿…é ˆã§ã™');
    }
    
    const existingUser = this.users.find(u => u.email === user.email);
    if (existingUser) {
      throw new Error('ã“ã®ãƒ¡ãƒ¼ãƒ«ã‚¢ãƒ‰ãƒ¬ã‚¹ã¯æ—¢ã«ä½¿ç”¨ã•ã‚Œã¦ã„ã¾ã™');
    }
    
    const newUser = { ...user, id: Date.now() };
    this.users.push(newUser);
    return newUser;
  }
  
  getUserByEmail(email) {
    return this.users.find(user => user.email === email);
  }
  
  getAllUsers() {
    return [...this.users];
  }
}

module.exports = UserManager;
```

```javascript
// UserManager.test.js
const UserManager = require('./UserManager');

describe('UserManager', () => {
  let userManager;
  
  beforeEach(() => {
    userManager = new UserManager();
  });
  
  describe('addUser', () => {
    test('æ­£å¸¸ãªãƒ¦ãƒ¼ã‚¶ãƒ¼ã‚’è¿½åŠ ã§ãã‚‹', () => {
      const user = { name: 'John', email: 'john@example.com' };
      const addedUser = userManager.addUser(user);
      
      expect(addedUser).toHaveProperty('id');
      expect(addedUser.name).toBe('John');
      expect(addedUser.email).toBe('john@example.com');
    });
    
    test('åå‰ãŒç©ºã®å ´åˆã‚¨ãƒ©ãƒ¼ã‚’æŠ•ã’ã‚‹', () => {
      const user = { email: 'john@example.com' };
      
      expect(() => {
        userManager.addUser(user);
      }).toThrow('åå‰ã¨ãƒ¡ãƒ¼ãƒ«ã¯å¿…é ˆã§ã™');
    });
    
    test('é‡è¤‡ã—ãŸãƒ¡ãƒ¼ãƒ«ã‚¢ãƒ‰ãƒ¬ã‚¹ã§ã‚¨ãƒ©ãƒ¼ã‚’æŠ•ã’ã‚‹', () => {
      const user1 = { name: 'John', email: 'john@example.com' };
      const user2 = { name: 'Jane', email: 'john@example.com' };
      
      userManager.addUser(user1);
      
      expect(() => {
        userManager.addUser(user2);
      }).toThrow('ã“ã®ãƒ¡ãƒ¼ãƒ«ã‚¢ãƒ‰ãƒ¬ã‚¹ã¯æ—¢ã«ä½¿ç”¨ã•ã‚Œã¦ã„ã¾ã™');
    });
  });
  
  describe('getUserByEmail', () => {
    test('å­˜åœ¨ã™ã‚‹ãƒ¦ãƒ¼ã‚¶ãƒ¼ã‚’å–å¾—ã§ãã‚‹', () => {
      const user = { name: 'John', email: 'john@example.com' };
      userManager.addUser(user);
      
      const foundUser = userManager.getUserByEmail('john@example.com');
      
      expect(foundUser).toBeTruthy();
      expect(foundUser.email).toBe('john@example.com');
    });
    
    test('å­˜åœ¨ã—ãªã„ãƒ¦ãƒ¼ã‚¶ãƒ¼ã®å ´åˆundefinedã‚’è¿”ã™', () => {
      const foundUser = userManager.getUserByEmail('notfound@example.com');
      
      expect(foundUser).toBeUndefined();
    });
  });
});
```

---

## ã‚ˆãã‚ã‚‹ã‚¨ãƒ©ãƒ¼ã¨è§£æ±ºæ–¹æ³•

### ã‚¨ãƒ©ãƒ¼: Cannot find module 'jest'

```bash
# è§£æ±ºæ–¹æ³•: Jestã‚’ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«
npm install --save-dev jest
```

### ã‚¨ãƒ©ãƒ¼: ReferenceError: describe is not defined

```javascript
// è§£æ±ºæ–¹æ³•: jestç’°å¢ƒã‚’è¨­å®š
// package.json ã¾ãŸã¯ jest.config.js ã§
{
  "testEnvironment": "node"
}
```

### ã‚¨ãƒ©ãƒ¼: async/awaitãŒå‹•ã‹ãªã„

```javascript
// æ‚ªã„ä¾‹
test('éåŒæœŸãƒ†ã‚¹ãƒˆ', () => {
  const result = async () => await fetchData();
  expect(result).toBe('data'); // ã“ã‚Œã¯å‹•ã‹ãªã„
});

// è‰¯ã„ä¾‹
test('éåŒæœŸãƒ†ã‚¹ãƒˆ', async () => {
  const result = await fetchData();
  expect(result).toBe('data');
});
```

### ã‚¨ãƒ©ãƒ¼: ãƒ¢ãƒƒã‚¯ãŒåŠ¹ã‹ãªã„

```javascript
// æ‚ªã„ä¾‹: ãƒ¢ãƒƒã‚¯ã®é †åºãŒé–“é•ã£ã¦ã„ã‚‹
const { getData } = require('./data');
jest.mock('./api'); // requireã‚ˆã‚Šå¾Œã ã¨åŠ¹ã‹ãªã„

// è‰¯ã„ä¾‹
jest.mock('./api');
const { getData } = require('./data');
```

---

## ãƒ™ã‚¹ãƒˆãƒ—ãƒ©ã‚¯ãƒ†ã‚£ã‚¹

### ãƒ†ã‚¹ãƒˆåã®ä»˜ã‘æ–¹

```javascript
// âŒ æ‚ªã„ä¾‹
test('test1', () => {});
test('add function', () => {});

// âœ… è‰¯ã„ä¾‹  
test('add(2, 3) ã¯ 5 ã‚’è¿”ã™', () => {});
test('ç©ºã®é…åˆ—ã®å ´åˆã€0ã‚’è¿”ã™', () => {});
test('ç„¡åŠ¹ãªãƒ¡ãƒ¼ãƒ«ã‚¢ãƒ‰ãƒ¬ã‚¹ã®å ´åˆã€ã‚¨ãƒ©ãƒ¼ã‚’æŠ•ã’ã‚‹', () => {});
```

### AAA ãƒ‘ã‚¿ãƒ¼ãƒ³ã‚’ä½¿ã†

```javascript
test('ãƒ¦ãƒ¼ã‚¶ãƒ¼ã®å¹´é½¢ã‚’è¨ˆç®—ã™ã‚‹', () => {
  // Arrangeï¼ˆæº–å‚™ï¼‰
  const birthDate = new Date('1990-01-01');
  const currentDate = new Date('2024-01-01');
  
  // Actï¼ˆå®Ÿè¡Œï¼‰
  const age = calculateAge(birthDate, currentDate);
  
  // Assertï¼ˆæ¤œè¨¼ï¼‰
  expect(age).toBe(34);
});
```

### 1ã¤ã®ãƒ†ã‚¹ãƒˆã§1ã¤ã®ã“ã¨ã ã‘ã‚’ãƒ†ã‚¹ãƒˆã™ã‚‹

```javascript
// âŒ æ‚ªã„ä¾‹
test('ãƒ¦ãƒ¼ã‚¶ãƒ¼æ©Ÿèƒ½', () => {
  const user = createUser({ name: 'John' });
  expect(user.name).toBe('John');
  
  const users = getAllUsers();
  expect(users).toHaveLength(1);
  
  deleteUser(user.id);
  expect(getAllUsers()).toHaveLength(0);
});

// âœ… è‰¯ã„ä¾‹
test('createUser ã¯æ–°ã—ã„ãƒ¦ãƒ¼ã‚¶ãƒ¼ã‚’ä½œæˆã™ã‚‹', () => {
  const user = createUser({ name: 'John' });
  expect(user.name).toBe('John');
});

test('deleteUser ã¯æŒ‡å®šã•ã‚ŒãŸãƒ¦ãƒ¼ã‚¶ãƒ¼ã‚’å‰Šé™¤ã™ã‚‹', () => {
  const user = createUser({ name: 'John' });
  deleteUser(user.id);
  expect(getAllUsers()).not.toContain(user);
});
```

### ãƒ†ã‚¹ãƒˆã¯ç‹¬ç«‹ã•ã›ã‚‹

```javascript
// âŒ æ‚ªã„ä¾‹ï¼šãƒ†ã‚¹ãƒˆé–“ã§çŠ¶æ…‹ã‚’å…±æœ‰
let counter = 0;

test('ã‚«ã‚¦ãƒ³ã‚¿ãƒ¼ã‚’å¢—ã‚„ã™', () => {
  counter++;
  expect(counter).toBe(1);
});

test('ã‚«ã‚¦ãƒ³ã‚¿ãƒ¼ã‚’ã•ã‚‰ã«å¢—ã‚„ã™', () => {
  counter++; // å‰ã®ãƒ†ã‚¹ãƒˆã«ä¾å­˜ã—ã¦ã„ã‚‹
  expect(counter).toBe(2);
});

// âœ… è‰¯ã„ä¾‹ï¼šå„ãƒ†ã‚¹ãƒˆã§ç‹¬ç«‹ã—ãŸçŠ¶æ…‹
test('ã‚«ã‚¦ãƒ³ã‚¿ãƒ¼ã‚’å¢—ã‚„ã™', () => {
  const counter = new Counter();
  counter.increment();
  expect(counter.value).toBe(1);
});
```

### æ„å‘³ã®ã‚ã‚‹ãƒ†ã‚¹ãƒˆãƒ‡ãƒ¼ã‚¿ã‚’ä½¿ã†

```javascript
// âŒ æ‚ªã„ä¾‹
test('ãƒ¦ãƒ¼ã‚¶ãƒ¼ä½œæˆ', () => {
  const user = createUser('aaa', 'bbb@ccc.com');
  expect(user.name).toBe('aaa');
});

// âœ… è‰¯ã„ä¾‹
test('æœ‰åŠ¹ãªæƒ…å ±ã§ãƒ¦ãƒ¼ã‚¶ãƒ¼ã‚’ä½œæˆã™ã‚‹', () => {
  const user = createUser('å±±ç”°å¤ªéƒ', 'yamada@example.com');
  expect(user.name).toBe('å±±ç”°å¤ªéƒ');
  expect(user.email).toBe('yamada@example.com');
});
```

---

## ğŸ¯ ã¾ã¨ã‚

Jestã‚’ä½¿ã£ãŸãƒ†ã‚¹ãƒˆã®åŸºæœ¬ã‹ã‚‰å¿œç”¨ã¾ã§ã€å®Ÿéš›ã®ã‚³ãƒ¼ãƒ‰ä¾‹ã‚’é€šã—ã¦å­¦ç¿’ã§ãã‚‹ã‚ˆã†ã¾ã¨ã‚ã¾ã—ãŸã€‚

### è¦šãˆã¦ãŠããŸã„ãƒã‚¤ãƒ³ãƒˆ

1. **åŸºæœ¬æ§‹æ–‡**: `test()`, `expect()`, `toBe()`, `toEqual()`
2. **éåŒæœŸãƒ†ã‚¹ãƒˆ**: `async/await` ã‚’ä½¿ã†
3. **ãƒ¢ãƒƒã‚¯**: `jest.fn()`, `jest.mock()` ã§å¤–éƒ¨ä¾å­˜ã‚’åˆ¶å¾¡
4. **ãƒ†ã‚¹ãƒˆæ§‹é€ **: `describe()` ã§ã‚°ãƒ«ãƒ¼ãƒ—åŒ–
5. **AAA ãƒ‘ã‚¿ãƒ¼ãƒ³**: Arrange, Act, Assert ã§æ˜ç¢ºã«

### æ¬¡ã®ã‚¹ãƒ†ãƒƒãƒ—

- ã‚ˆã‚Šé«˜åº¦ãªãƒãƒƒãƒãƒ£ãƒ¼ã‚’å­¦ã¶
- ã‚«ãƒãƒ¬ãƒƒã‚¸ãƒ¬ãƒãƒ¼ãƒˆã®è¦‹æ–¹ã‚’è¦šãˆã‚‹
- CI/CDã§ã®ãƒ†ã‚¹ãƒˆè‡ªå‹•åŒ–
- TDDï¼ˆãƒ†ã‚¹ãƒˆé§†å‹•é–‹ç™ºï¼‰ã«ãƒãƒ£ãƒ¬ãƒ³ã‚¸

é ‘å¼µã£ã¦è‰¯ã„ãƒ†ã‚¹ãƒˆã‚’æ›¸ã„ã¦ã„ãã¾ã—ã‚‡ã†ï¼ğŸš€
